{% extends 'base.html.twig' %}

{% block title %}Ticket{% endblock %}

{% block body %}
    <section id="ticketedit">
        <div class="container position-relative">
            <div class="row gy-5" data-aos="fade-in">
                <div class="col-lg-12  order-lg-1 d-flex flex-column  caption">
                    <h1>Ticket {{ ticket.subject }} status : {{ ticket.getStatusAsString }}</h1>

                    <h2>Date de création
                        : {{ ticket.createdAt ? ticket.createdAt|format_datetime(locale='fr', pattern="EEEE dd MMMM YYYY") : '' }} à {{ ticket.createdAt ? ticket.createdAt|date("H:i") : '' }}</h2>

                    {% for row in ticket.messages %}
                        <div class="row mb-4">

                            <div class="col-2 text-center">
                                <p><img src="{{ ticket.user.photo ?asset('assets/file/'~ ticket.user.photo): asset('assets/file/blank-profile-picture-973460__340.webp') }}"
                                        class="rounded" width="100" height="100" alt="{{ ticket.user.fullName }}"></p>
                                <p class="mb-0">{{ ticket.user.fullName }}</p>
                            </div>
                            <div class="col-10 messageticket" ><p class="text-muted">Le : {{ row.createdAt ? row.createdAt|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY")  : '' }}  à {{ row.createdAt ? row.createdAt|date("H:i") : '' }}</p>  {{ row.content|raw }}</div>
                        </div>
                    {% endfor %}

                    <hr>
                    <h2>Votre réponse</h2>
                    {{ form_start(form) }}

                    {{ form_widget(form.subject, {'value': ticket.subject, 'attr': {'class': 'd-none'}}) }}
                    {{ form_row(form.content) }}
                    <div class="form-group">
                    <a href="{{ path('app_support_Liste') }}" class="btn btn-dark">Retour</a>
                    <button class="btn btn-success" type="submit">{{ button_label|default('Soumettre') }}</button>
                    </div>
                    {{ form_end(form) }}


                </div>
            </div>
        </div>
    </section>
{% endblock %}
